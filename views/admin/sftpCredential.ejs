<head>
    <%- include('../partials/head'); %>
</head>
<header>
    <%- include('../partials/adminHeader'); %>
</header>

<div class="container">
    <div class="row">
        <h2>Manage SFTP Credentials</h2>


        <div class="col-4 login">
            <form onsubmit="createSFTP()">
                <div class="row">
                    <div class="col form-group">
                        <input type="text" class="form-control" name="sftpid" id="sftpid"
                            style="visibility: hidden;width: 20px;">
                        <select class="form-control" name="site" id="site" required>
                            <option value="">Select Site</option>
                            <% for(let i=0; i < siteList.length; i++) { %>
                                <option value='<%= siteList[i].SiteId %>'>
                                    <%= siteList[i].SiteName %>
                                </option>
                                <%}%>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <select class="form-control" name="environment" id="environment" required>
                            <option value="">
                                Select Environment
                            </option>
                            <% for(let i=0; i < envList.length; i++) { %>
                                <option value='<%= envList[i].envId %>'>
                                    <%= envList[i].envName %>
                                </option>
                                <%}%>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <input type="text" class="form-control" maxlength="50" placeholder="Host/IP Address" name="host"
                            id="host" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <input type="text" class="form-control" maxlength="2" placeholder="Port" name="port" id="port"
                            required>
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <input type="text" class="form-control" maxlength="100" placeholder="Username" name="username"
                            id="username" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <input type="password" class="form-control" maxlength="100" placeholder="Password"
                            name="password" id="password" required>
                    </div>
                </div>
                <div class="row">
                    <div class="col form-group">
                        <div class="d-grid gap-2">
                            <input type="submit" class="btn btn-info" value="Submit" id="btnSubmit">
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="col">
            <table class="table table-bordered">
                <tr>
                    <th>Sr.No.</th>
                    <th>Site Name</th>
                    <th>Environment</th>
                    <th>Host</th>
                    <th>Port</th>
                    <th>Username</th>
                    <th>Password</th>
                    <th>Edit</th>
                    <th>Delete</th>
                </tr>
                <% for(let i=0; i < sftpCreds.length; i++) { %>
                    <tr>
                        <td>
                            <%= i + 1 %>
                        </td>
                        <td>
                            <%= sftpCreds[i].SiteName %>
                        </td>
                        <td>
                            <%= sftpCreds[i].Environment %>
                        </td>
                        <td>
                            <%= sftpCreds[i].Host %>
                        </td>
                        <td>
                            <%= sftpCreds[i].Port %>
                        </td>
                        <td>
                            <%= sftpCreds[i].Username %>
                        </td>
                        <td>
                            <%= sftpCreds[i].Password %>
                        </td>
                        <td>
                            <a href="#"
                                onclick="editSFTP('<%= sftpCreds[i].Id %>','<%= sftpCreds[i].SiteId %>','<%= sftpCreds[i].EnvId %>','<%= sftpCreds[i].Host %>','<%= sftpCreds[i].Port %>','<%= sftpCreds[i].Username %>','<%= sftpCreds[i].Password %>')"><i
                                    class="fa fa-edit fa-2x"></i></a>
                        </td>
                        <td>
                            <a href="#" onclick="deleteSFTP('<%= sftpCreds[i].Id %>')"><i
                                    class="fa fa-trash fa-2x"></i></a>
                        </td>
                    </tr>
                    <%}%>

            </table>
        </div>
    </div>
</div>
<footer>
    <%- include('../partials/footer'); %>
</footer>